<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Re-Bound | Give Pages a Second Life</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>
<body>

<form id="reboundForm">
  <label>Collection Center</label>
  <select name="collectionCenter" id="collectionCenter" required>
    <option value="">Select Collection Center</option>
  </select>

  <input
    type="text"
    id="newCenterInput"
    name="newCollectionCenter"
    placeholder="Enter name & area of the collection center"
    style="display:none; margin-top:0.6rem;"
  />

  <button type="submit">Submit</button>

  <div id="formSuccessMessage" style="display:none; margin-top:0.8rem; padding:0.7rem; border-radius:0.8rem; background:#e6fffa; color:#065f46;">
    Thank you! Your response has been received.
  </div>
</form>

<script>
const GAS_URL = "https://script.google.com/macros/s/AKfycbzDu5o_EilirlyJjJvzOPaahbuVjXCsxLBXDXMGxjqpO-gdas6ExNWujUiUpTMUUqDe/exec";

document.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("collectionCenter");
  const input = document.getElementById("newCenterInput");

  while (select.options.length > 1) select.remove(1);

  select.add(new Option("Garadi Apartment, Basavanagudi", "Garadi Apartment, Basavanagudi"));
  select.add(new Option("âž• Request a new collection center", "__request_new__"));

  select.addEventListener("change", () => {
    const show = select.value === "__request_new__";
    input.style.display = show ? "block" : "none";
    input.required = show;
    if (!show) input.value = "";
  });
});

document.getElementById("reboundForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  let center = collectionCenter.value;
  if (center === "__request_new__") {
    center = newCenterInput.value.trim();
    if (!center) return alert("Please enter a collection center.");
  }

  const data = new FormData();
  data.append("collectionCenter", center);

  await fetch(GAS_URL, { method: "POST", mode: "no-cors", body: data });

  document.getElementById("formSuccessMessage").style.display = "block";
});
</script>

</body>
</html>
